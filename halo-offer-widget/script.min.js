!function(){"use strict";const e={cardsPerView:3,cardWidth:280,gap:24};let t={currentCategory:"video",currentChip:"netflix",currentOffset:0,currentSlide:0,totalCards:0,maxOffset:0};const a={widget:document.querySelector("[data-hoffer-widget]"),tabsContainer:document.querySelector("[data-hoffer-tabs]"),chipsContainers:document.querySelectorAll("[data-hoffer-chips]"),background:document.querySelector("[data-hoffer-background]"),prevBtn:document.getElementById("hofferPrevBtn"),nextBtn:document.getElementById("hofferNextBtn"),pagination:document.getElementById("hofferPagination"),navArrows:document.querySelector(".hoffer-nav-arrows"),sliderContainer:document.querySelector(".hoffer-cards-container"),modal:document.getElementById("hofferSubscriptionModal"),modalBackdrop:document.getElementById("hofferModalBackdrop"),modalClose:document.getElementById("hofferModalClose"),modalSubscribeBtn:document.getElementById("hofferModalSubscribeBtn"),modalTitle:document.getElementById("hofferModalTitle"),modalTitlePrice:document.querySelector(".hoffer-modal-title-price"),modalTitleValidity:document.querySelector(".hoffer-modal-title-validity"),modalDataPlan:document.getElementById("hofferModalDataPlan"),modalPromoBadge:document.getElementById("hofferModalPromoBadge"),modalDetails:document.getElementById("hofferModalDetails"),modalTerms:document.getElementById("hofferModalTerms")};function r(){const e=o();return e?e.querySelector("[data-hoffer-slider]"):null}function n(){return function(){const t=r();if(t){const e=t.querySelector(".hoffer-package-card");if(e)return e.offsetWidth}const a=document.querySelector(".hoffer-package-card");return a?a.offsetWidth:e.cardWidth}()+e.gap}function o(){return document.querySelector(`.hoffer-card-group[data-category="${t.currentCategory}"][data-chip="${t.currentChip}"]`)}function c(){const e=a.tabsContainer.querySelectorAll(".hoffer-tab-item");e.forEach(r=>{r.addEventListener("click",function(){const r=this.dataset.category,n=this.dataset.background;e.forEach(e=>e.classList.remove("active")),this.classList.add("active"),t.currentCategory=r,t.currentOffset=0,t.currentSlide=0,s(n),function(e){a.chipsContainers.forEach(t=>{t.dataset.category===e?t.classList.add("hoffer-active"):t.classList.remove("hoffer-active")})}(r);const o=document.querySelector(`[data-hoffer-chips][data-category="${r}"]`),c=o?.querySelector(".hoffer-chip");c&&d(c.dataset.chip)})})}function s(e){a.background&&e&&(a.background.style.backgroundImage=`url('${e}')`)}function d(e){t.currentChip=e,t.currentOffset=0,t.currentSlide=0;const a=document.querySelector(`[data-hoffer-chips][data-category="${t.currentCategory}"]`);a&&a.querySelectorAll(".hoffer-chip").forEach(t=>{t.classList.toggle("active",t.dataset.chip===e)}),i(),l()}function i(){document.querySelectorAll(".hoffer-card-group").forEach(e=>{const a=e.dataset.category===t.currentCategory,r=e.dataset.chip===t.currentChip;a&&r?e.classList.add("hoffer-active"):e.classList.remove("hoffer-active")});const e=o();t.totalCards=e?e.querySelectorAll(".hoffer-package-card").length:0}function l(){const o=n(),c=a.sliderContainer?.offsetWidth||900;e.cardsPerView=c<600?1:c<900?2:3;const s=Math.max(1,t.totalCards-e.cardsPerView+1);t.maxOffset=o*(s-1);const d=document.querySelectorAll("[data-hoffer-slider]"),i=r();d.forEach(e=>{e.style.transform=e===i?`translateX(-${t.currentOffset}px)`:"translateX(0)"});const l=t.currentSlide<=0,u=t.currentSlide>=s-1||t.totalCards<=e.cardsPerView;a.prevBtn&&(a.prevBtn.disabled=l),a.nextBtn&&(a.nextBtn.disabled=u),function(){if(!a.pagination)return;const r=Math.max(1,t.totalCards-e.cardsPerView+1);a.pagination.innerHTML="";for(let e=0;e<r;e++){const r=document.createElement("div");r.className="hoffer-pagination-dot"+(e===t.currentSlide?" active":""),r.style.width=e===t.currentSlide?"32px":"8px",r.style.height="8px",r.addEventListener("click",()=>f(e)),a.pagination.appendChild(r)}}(),function(){const r=window.innerWidth<=768,n=Math.max(1,t.totalCards-e.cardsPerView+1);a.navArrows&&(t.totalCards<=3||n<=1||r?a.navArrows.style.display="none":a.navArrows.style.display="flex");a.pagination&&(t.totalCards<=3||r||n<=1?a.pagination.style.display="none":a.pagination.style.display="flex")}()}function f(a){const r=Math.max(1,t.totalCards-e.cardsPerView+1);t.currentSlide=Math.max(0,Math.min(a,r-1));const o=n();t.currentOffset=t.currentSlide*o,l()}function u(){t.currentSlide=Math.max(0,t.currentSlide-1);const e=n();t.currentOffset=t.currentSlide*e,l()}function m(){const a=Math.max(1,t.totalCards-e.cardsPerView+1);t.currentSlide=Math.min(t.currentSlide+1,a-1);const r=n();t.currentOffset=t.currentSlide*r,l()}let h={startX:0,currentX:0,startOffset:0,isDragging:!1};function g(e){h.startX=e.touches[0].clientX,h.currentX=h.startX,h.startOffset=t.currentOffset,h.isDragging=!0;const a=r();a&&(a.style.transition="none")}function y(e){if(!h.isDragging)return;h.currentX=e.touches[0].clientX;const a=h.startX-h.currentX;let n=h.startOffset+a;if(n<0)n=.3*a;else if(n>t.maxOffset){const e=n-t.maxOffset;n=t.maxOffset+.3*e}const o=r();o&&(o.style.transform=`translateX(-${n}px)`)}function p(a){if(!h.isDragging)return;h.isDragging=!1;const o=r();o&&(o.style.transition="transform 0.5s ease");const c=a.changedTouches[0].clientX,s=h.startX-c,d=n(),i=Math.max(1,t.totalCards-e.cardsPerView+1),f=h.startOffset+s;let u=Math.round(f/d);const m=s/(Date.now()-a.timeStamp);Math.abs(m)>.5&&(u=m>0?Math.min(u+1,i-1):Math.max(u-1,0)),u=Math.max(0,Math.min(u,i-1)),t.currentSlide=u,t.currentOffset=t.currentSlide*d,l()}function v(){if(!h.isDragging)return;h.isDragging=!1;const e=r();e&&(e.style.transition="transform 0.5s ease"),l()}function S(e){const t=e.target.closest(".hoffer-package-card");if(!t)return;let r=[];try{r=t.dataset.extra?JSON.parse(t.dataset.extra):[]}catch(e){console.warn("Failed to parse data-extra JSON:",e),r=[{key:"INTERNET",value:t.dataset.extra||""}]}!function(e){if(!a.modal)return;a.modalPromoBadge.style.display="flex",a.modalTitle&&(a.modalTitle.textContent=e.name);a.modalTitlePrice&&(a.modalTitlePrice.textContent=e.finalPrice);a.modalTitleValidity&&(a.modalTitleValidity.textContent=e.duration);(function(e){if(!a.modalDataPlan)return;a.modalDataPlan.innerHTML="",e&&0!==e.length||(e=[{icon:"assets/components/globe.svg",key:"INTERNET",value:"-"}]);e.forEach(e=>{const t=`\n                <div class="hoffer-data-plan-row">\n                    <div class="hoffer-data-plan-label">\n                        <img src="${e.icon||"assets/components/globe.svg"}" alt="icon-offer">\n                        <span>${e.key}</span>\n                    </div>\n                    <span class="hoffer-data-plan-value">${e.value}</span>\n                </div>\n            `;a.modalDataPlan.innerHTML+=t})})(e.extra),a.modalPromoBadge&&(e.promo?a.modalPromoBadge.textContent=e.promo:a.modalPromoBadge.style.display="none");a.modalDetails&&(e.details?a.modalDetails.innerHTML=e.details:a.modalDetails.innerHTML="-");a.modalTerms&&(e.terms?a.modalTerms.innerHTML=e.terms:a.modalTerms.innerHTML="-");document.querySelectorAll(".hoffer-expandable-section").forEach(e=>{e.classList.remove("active")}),a.modal.classList.add("active"),document.body.style.overflow="hidden"}({name:t.dataset.name||"",duration:t.dataset.duration||"",extra:r,originalPrice:t.dataset.originalPrice||"",finalPrice:t.dataset.finalPrice||"",promo:t.dataset.promo||"",details:t.dataset.details||"",terms:t.dataset.terms||""})}function x(){a.modal&&(a.modal.classList.remove("active"),document.body.style.overflow="",document.querySelectorAll(".hoffer-expandable-section").forEach(e=>{e.classList.remove("active")}))}function E(){c(),document.querySelectorAll(".hoffer-chip").forEach(e=>{e.addEventListener("click",function(){d(this.dataset.chip)})}),function(){const e=a.sliderContainer;e&&(e.addEventListener("touchstart",g,{passive:!0}),e.addEventListener("touchmove",y,{passive:!0}),e.addEventListener("touchend",p,{passive:!0}),e.addEventListener("touchcancel",v,{passive:!0}))}(),a.modal&&(a.modalBackdrop&&a.modalBackdrop.addEventListener("click",x),a.modalClose&&a.modalClose.addEventListener("click",x),a.modalSubscribeBtn&&a.modalSubscribeBtn.addEventListener("click",x),document.querySelectorAll(".hoffer-expandable-header").forEach(e=>{e.addEventListener("click",function(){const e=this.closest(".hoffer-expandable-section"),t=e.classList.contains("active");document.querySelectorAll(".hoffer-expandable-section").forEach(e=>{e.classList.remove("active")}),t||e.classList.add("active")})}),document.querySelectorAll("[data-hoffer-slider]").forEach(e=>{e.addEventListener("click",S)})),document.addEventListener("keydown",e=>{"Escape"===e.key&&a.modal?.classList.contains("active")?x():"ArrowLeft"===e.key&&a.prevBtn&&!a.prevBtn.disabled?u():"ArrowRight"===e.key&&a.nextBtn&&!a.nextBtn.disabled&&m()}),window.addEventListener("resize",()=>{const a=n(),r=Math.max(1,t.totalCards-e.cardsPerView+1);t.maxOffset=a*(r-1),t.currentSlide=Math.round(t.currentOffset/a),t.currentSlide>r-1&&(t.currentSlide=Math.max(0,r-1)),t.currentOffset=t.currentSlide*a,l()}),a.prevBtn&&a.prevBtn.addEventListener("click",u),a.nextBtn&&a.nextBtn.addEventListener("click",m),document.querySelectorAll(".hoffer-package-card").forEach(e=>{const t=e.querySelector(".hoffer-package-extra");if(!t)return;let a=[];try{a=e.dataset.extra?JSON.parse(e.dataset.extra):[]}catch(e){return}t.textContent=function(e){return e&&0!==e.length?1===e.length?e[0].value:2===e.length?`${e[0].value} + ${e[1].value}`:`${e[0].value} + ${e.length-1} more`:""}(a)}),i(),l();const r=a.tabsContainer?.querySelector(".hoffer-tab-item[data-background]");r&&s(r.dataset.background)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",E):E()}();